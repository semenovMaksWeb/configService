[
    {
        "name": "fileCategories",
        "result": "=",
        "comment": "Чтения файла: Ответ с категориями",
        "action": "fileRead",
        "path": {
            "const": "./media/joom/dataset_out/categories.json",
            "convert": null
        }
    },
    {
        "name": "fileCategories",
        "action": "initVar",
        "result": "=",
        "comment": "Сохранить путь к файлу",
        "initVar": {
            "store": "fileCategories",
            "convert": {
                "type": "json"
            }
        }
    },
    {
        "name": "nameList",
        "result": "=",
        "comment": "Массив названии",
        "action": "convertListInKeyArray",
        "convertListInKeyArray": {
            "key": {
                "const": "name"
            },
            "list": {
                "store": "fileCategories"
            }
        }
    },
    {
        "name": "imageList",
        "result": "=",
        "comment": "Массив названии",
        "action": "convertListInKeyArray",
        "convertListInKeyArray": {
            "key": {
                "const": "image"
            },
            "list": {
                "store": "fileCategories"
            }
        }
    },
    {
        "name": "fuctionConnectionDB",
        "action": "fileConfig",
        "path": "/connection/postgressql.json",
        "result": "=",
        "comment": "Подключение к бд"
    },
    {
        "name": "sqlResultMysql",
        "action": "sql",
        "result": "=",
        "comment": "Вызов sql функции",
        "sql": {
            "type": {
                "env": "BD_MAIN_TYPE",
                "convert": {
                    "type": "string"
                }
            },
            "connection": {
                "store": "connectionMain",
                "convert": null
            },
            "query": "INSERT INTO joom.categories (name, image) (SELECT * FROM UNNEST($1::varchar[], $2::varchar[]))",
            "params": [
                {
                    "store": "nameList"
                },
                {
                    "store": "imageList"
                }
            ]
        }
    }
]